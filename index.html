<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Bubbles!</title>
    <style>
        body,
        html {
            width: 100%;
            height: 100%;
            margin: 0px;
        }
        
        #bubbleCanvas {
            z-index: 1;
        }
        
        #btn {
            z-index: 2;
            position: absolute;
            top: 50%;
            left: 50%;
        }

    </style>
</head>

<body>
    <canvas id="bubbleCanvas">
    </canvas>
    <button id="btn" onclick="buy10()">Buy 10!</button>
    <script>
        var canvas;
        var context;
        var bubbles = [];
        var count = 0;

        function init() {
            canvas = document.getElementById("bubbleCanvas");
            canvas.addEventListener('click', drawOne, false);
            context = canvas.getContext("2d");
            context.canvas.width = window.innerWidth;
            context.canvas.height = window.innerHeight;
        }

        function drawOne() {
            var xPos = Math.floor(Math.random() * document.body.clientWidth);
            var yPos = Math.floor(Math.random() * document.body.clientHeight);
            var r = Math.floor((Math.random() * 100) + 10);
            var c = getRandomColor();
            bubbles.push({
                x: xPos,
                y: yPos,
                radius: r,
                color: c
            });
            count++;
            context.beginPath();
            context.arc(xPos, yPos, r, 0, 2 * Math.PI);
            context.fillStyle = c;
            context.fill();
        }

        function getRandomColor() {
            var letters = '0123456789ABCDEF';
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function buy10() {
            if (bubbles.length < 10){
                return;
            }
            bubbles.splice(0, 10);
            redraw();
        }

        function redraw() {
            context.clearRect(0, 0, canvas.width, canvas.height);
            for (var i = 0; i < bubbles.length; i++) {
                context.beginPath();
                context.arc(bubbles[i].x, bubbles[i].y, bubbles[i].radius, 0, 2 * Math.PI);
                context.fillStyle = bubbles[i].color;
                context.fill();
            }
        }

        init();

    </script>
</body>
